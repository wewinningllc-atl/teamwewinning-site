<script>
  async function init() {
    // Try to load config.json; fallback to safe defaults
    let cfg = { tagline: "", products: [], events: [] };
    try {
      const r = await fetch('config.json', { cache: 'no-store' });
      if (r.ok) cfg = await r.json();
    } catch (e) {
      console.warn('Using fallback config:', e);
    }

    // Tagline (always render something)
    document.getElementById('tagline').textContent = cfg.tagline || "Culture you can wear. Energy you can feel.";

    // Products: only show priced items
    const pWrap = document.getElementById('products');
    (cfg.products || []).forEach(p => {
      if (!p.price) return; // hide unpriced
      const div = document.createElement('div');
      div.innerHTML = `${p.title} — ${p.price}`;
      pWrap.appendChild(div);
    });

    // Events: hide past dates automatically
    const eWrap = document.getElementById('events');
    const now = new Date();
    (cfg.events || []).forEach(e => {
      // Parse dates like "Fri • Nov 21, 2025"
      const parsed = new Date((e.date || "").replace("•", ""));
      if (isNaN(parsed) || parsed < now) return;
      const div = document.createElement('div');
      div.innerHTML = `${e.date} | ${e.title} | ${e.time || ""}`;
      eWrap.appendChild(div);
    });
  }
  init();
</script>


